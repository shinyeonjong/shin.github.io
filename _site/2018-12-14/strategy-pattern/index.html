<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>strategy pattern</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" type="text/css">

  <!-- Font -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for shinyeonjong" href="/feed.xml" />
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>strategy pattern | shinyeonjong</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="strategy pattern" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="strategy pattern" />
<meta property="og:description" content="strategy pattern" />
<link rel="canonical" href="http://localhost:4000/2018-12-14/strategy-pattern/" />
<meta property="og:url" content="http://localhost:4000/2018-12-14/strategy-pattern/" />
<meta property="og:site_name" content="shinyeonjong" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-14T00:00:00+09:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2018-12-14/strategy-pattern/","headline":"strategy pattern","dateModified":"2018-12-14T00:00:00+09:00","datePublished":"2018-12-14T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018-12-14/strategy-pattern/"},"description":"strategy pattern","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->



  <!-- Google Analytics -->

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');

</script>



</head>

<body>
  <div class="content-container">
    <header>
  <div class="header-small">
    <a href="http://localhost:4000">shinyeonjong</a>
  </div>
</header>
<div class="post">
  <div class="post-title">strategy pattern</div>
  <span class="post-date">
    <time>14 Dec 2018</time>
  </span>
  <div class="post-tag">
    <ul>
      
      <li>
        <a href="http://localhost:4000/tags#strategy">
          <span>strategy</span>
        </a>
      </li>
      
      
      <li>
        <a href="http://localhost:4000/tags#pattern">
          <span>pattern</span>
        </a>
      </li>
      
      
    </ul>
  </div>

  <h2 id="1-strategy-pattern-전략-패턴">1. Strategy Pattern [전략 패턴]</h2>

<ul>
  <li><code class="highlighter-rouge">객체지향 기법</code>을 사용하여 Duck 이라는 수퍼클래스를 만든다음, 그 클래스를 확장하여 다른 모든 종류의 오리를 만든다. (상속)        <br />
수정사항 1. 오리가 날아야해요.
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Duck</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">quack</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"꽦!!"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">swim</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"헤엄헤엄~"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">();</span>
    
  <span class="c1">// 오리들이 날아야하는 문제가 생겨 추가</span>
  <span class="c1">// *템플릿 메소드 패턴(Template Method Pattern) : 공통인 부분을 추출하여 뺌</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"날아라~"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <p>수정사항2. 유인용 새는 울지도 날아도 안 돼요.</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DecoyDuck</span> <span class="kd">extends</span> <span class="n">Duck</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"유인용 새입니다."</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// 유인용 새는 울 수 없어요.</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">quack</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
  <span class="o">}</span>
    
  <span class="c1">// 유인용 새는 날 수 없어요.</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <p>수정사항3. 고무오리는 날면 안돼요.</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RubberDuck</span> <span class="kd">extends</span> <span class="n">Duck</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"고무오리야"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// 고무오리는 삒삒 울어요.</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">quack</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"삒삒"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// 고무오리는 날 수 없어요.</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <p><code class="highlighter-rouge">상속</code>을 사용한다면 서브클래스마다 오리의 행동이 바뀔 수 있는데도 모든 서브클래스에서 한 행동을 사용하도록 하는 것은 올바르지 않다.
이렇게 오리가 하나 추가될 때마다, 기능이 추가될 때마다 많은 부분을 수정해야 한다.</p>
    <h4 id="인터페이스는-어떨까요">인터페이스는 어떨까요?</h4>
    <p>```java
public interface Quackable {
  void quack();
}</p>
  </li>
</ul>

<p>public interface Flyable {
    void fly();
}</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
```java
public class MallardDuck extends Duck implements Flyable, Quackable {

    @Override
    public void display() {
        System.out.println("나는 청둥오리야");
    }

    // 중복
    @Override
    public void fly() {
        System.out.println("오리는 날아요.");
    }

    @Override
    public void quack() {
        System.out.println("천둥오리 : 꽥~");
    }
}
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RedHeadDuck</span> <span class="kd">extends</span> <span class="n">Duck</span> <span class="kd">implements</span> <span class="n">Flyable</span><span class="o">,</span> <span class="n">Quackable</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"나는 아메리카흰죽지..?야"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// 중복</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"오리는 날아요."</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">quack</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"아메리카흰죽지 : 꽉꽉"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>인터페이스에는 구현된 코드가 없기때문에 <code class="highlighter-rouge">코드 재사용</code>을 할수 없다는 문제점이 있다.       <br />
수정사항4. 중복을 제거하세요.</p>
<blockquote>
  <p>디자인원칙<br />
애플리케이션에서 달라지는 부분을 찾아내고, 달라지지 않는 부분으로부터 분리한다. <br />
‘바뀌는 부분은 따로 뽑아서 캡슐화시킨다. 그렇게 하면 나중에 바뀌지 않는 부분에는 영향을 미치지 않은 채로 그 부분만 고치거나 확장할 수 있다.’</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FlyNoWay</span> <span class="kd">implements</span> <span class="n">FlyBehavior</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// 날지 않아요.</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FlyWithWings</span> <span class="kd">implements</span> <span class="n">FlyBehavior</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fly</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"날개를 이용해 푸드덕"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Quack</span> <span class="kd">implements</span> <span class="n">QuackBehavior</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">quack</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"꽥"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Squeak</span> <span class="kd">implements</span> <span class="n">QuackBehavior</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">quack</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"삑삑"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MuteQuack</span> <span class="kd">implements</span> <span class="n">QuackBehavior</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">quack</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//울지 않아요.</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="duck의-행동-구현">Duck의 행동 구현</h4>
<ol>
  <li>Duck 클래스에 <code class="highlighter-rouge">flyBehavior</code>, <code class="highlighter-rouge">quackBehavior</code> 두 개의 인터페이스 형식의 인터페이스 변수를 추가하고</li>
  <li><code class="highlighter-rouge">fly()</code>와 <code class="highlighter-rouge">quack()</code> 대신 <code class="highlighter-rouge">performQuack()</code> 와 <code class="highlighter-rouge">performFly()</code> 메소드를 추가한다.
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Duck</span> <span class="o">{</span>
 <span class="c1">// 1.</span>
 <span class="n">QuackBehavior</span> <span class="n">quackBehavior</span><span class="o">;</span>
 <span class="n">FlyBehavior</span> <span class="n">flyBehavior</span><span class="o">;</span>

 <span class="c1">// 2.</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">performQuack</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// 꽥꽥거리는 행동을 직접 처리하는 대신, quackBehavior로 참조되는 객체에 행동을 위임한다.</span>
     <span class="k">this</span><span class="o">.</span><span class="na">quackBehavior</span><span class="o">.</span><span class="na">quack</span><span class="o">();</span>
 <span class="o">}</span>

 <span class="c1">// 2.</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">performFly</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">this</span><span class="o">.</span><span class="na">flyBehavior</span><span class="o">.</span><span class="na">fly</span><span class="o">();</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">swim</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"헤엄헤엄~"</span><span class="o">);</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>각 오리 객체에서는 실행시에 <code class="highlighter-rouge">flyBehavior</code>, <code class="highlighter-rouge">quackBehavior</code> 두 변수에 특정 행동 형식에 대한 레퍼런스를 다형적으로 설정한다.
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MallardDuck</span> <span class="kd">extends</span> <span class="n">Duck</span> <span class="o">{</span>
 <span class="c1">// 1) MallardDuck의 인스턴스가 만들어질 때</span>
 <span class="kd">public</span> <span class="nf">MallardDuck</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// 2) 생성자에서는 Duck으로부터 상속받은 quackBehavior 인스턴스 변수에</span>
     <span class="c1">// Quack(QuackBehavior를 구현한 구상 클래스)형식의 새로운 인스턴스를 대입합니다.</span>
     <span class="kd">super</span><span class="o">.</span><span class="na">quackBehavior</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Quack</span><span class="o">();</span>
     <span class="c1">// 3) 나는 행동 또한 마찬가지 상속받은 flyBehavior 인스턴스 변수에</span>
     <span class="c1">// FlyWithWings(FlyBehavior를 구현한 구상 클래스)형식의 새로운 인스턴스를 대입합니다.</span>
     <span class="kd">super</span><span class="o">.</span><span class="na">flyBehavior</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FlyWithWings</span><span class="o">();</span>
 <span class="o">}</span>

 <span class="nd">@Override</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"나는 청둥오리야"</span><span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <h4 id="동적으로-행동을-지정하는-방법">동적으로 행동을 지정하는 방법</h4>
  </li>
  <li>Duck클래스에 <code class="highlighter-rouge">setter</code>메소드를 만든다.
```java
public void setFlyBehavior(FlyBehavior flyBehavior) {
 this.flyBehavior = flyBehavior;
}</li>
</ol>

<p>public void setQuackBehavior(QuackBehavior quackBehavior) {
    this.quackBehavior = quackBehavior;
}</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2. ```ModelDuck``` 예제. 
```java
public class DuckSimulator {
    public static void main(String[] args) {
        Duck mallardDuck = new MallardDuck();
        mallardDuck.performFly();
        mallardDuck.performQuack();

        Duck model = new ModelDuck();
        model.performFly();
        model.setFlyBehavior(new FlyRocketPowered());
        model.performFly();
    }
}
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//결과</span>
<span class="err">날개를</span> <span class="err">이용해</span> <span class="err">푸드덕</span>
<span class="err">꽥</span>
<span class="err">날지</span> <span class="err">않아요</span><span class="o">.</span>
<span class="err">로켓</span> <span class="err">추진으로</span> <span class="err">날아갑니다</span><span class="o">.</span>
</code></pre></div></div>

<h4 id="a는-b이다-보다-a에는-b가-있다가-나을-수-있습니다">“A는 B이다.” 보다 “A에는 B가 있다.”가 나을 수 있습니다.</h4>
<blockquote>
  <p>디자인원칙<br />
상속보다는 구성을 활용한다.</p>
</blockquote>

<p>Duck 에는 <code class="highlighter-rouge">QuackBehavior</code>와<code class="highlighter-rouge">FlyBehavior</code>가 있다.
이런 식으로 하쳐지는 것을 <code class="highlighter-rouge">구성(composition)</code>을 이용하는 것이라고 부른다.
구성을 이용하면 유연성을 크게 향상시킬 수 있다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Duck</span> <span class="o">{</span>
    <span class="n">QuackBehavior</span> <span class="n">quackBehavior</span><span class="o">;</span>
    <span class="n">FlyBehavior</span> <span class="n">flyBehavior</span><span class="o">;</span>
    <span class="o">...</span>
</code></pre></div></div>
<h4 id="마지막-정리">마지막 정리</h4>

<blockquote>
  <p>Strategy Pattern <br />
스트래티지패턴에서는 알고리즘군을 정의하고 각각을 캡슐화하여 교환해서 사용할 수 있도록 만든다. 스트래티지 패턴을 활용하면 알고리즘을 사용하는 클라이언트와는 독립적으로 알고리즘을 변경할 수 있다.</p>
</blockquote>


  <!-- Disqus -->
  

</div>


    <!-- Documents about icons are here: http://fontawesome.io/icons/ -->
<div class="footer">
  <hr />
  <div class="footer-link">
    
	
	
	
	

    

    
    <a href="https://github.com/shinyeonjong"><i class="fa fa-github" aria-hidden="true"></i></a>
    
	
	
	
	

    
	
	
	
	
	
	
	
	

    

    

    
    <a href="mailto:yjshin81002@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    

  </div>
  © 2017 Kiko. All rights reserved.
</div>

  </div>
</body>
</html>
